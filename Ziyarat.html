<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bay Area Ziyarah Trip 2025/2026 Registration</title>

  <!-- Bootstrap 5 CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
  >
  <!-- Flatpickr CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"
    rel="stylesheet"
  >

  <style>
    body {
      background-color: #f5f5f5;
    }
    .summary-card {
      border-left: 4px solid #d9534f;
    }
    .flatpickr-input {
      background-color: #fff !important;
    }
  </style>
</head>
<body>
  <div class="container py-5">
    <!-- Header -->
    <div class="text-center mb-5">
      <h1>Bay Area Ziyarah Trip 2025/2026</h1>
      <p class="text-muted">December 24 – January 11 — SFO via Turkish Airlines</p>
    </div>

    <!-- Trip Summary -->
    <div class="card summary-card mb-4 shadow-sm">
      <div class="card-body">
        <p><strong class="text-danger">$3,950 total cost</strong> (includes visa, meals, airfare, hotel)</p>
        <p><strong class="text-danger">$500 deposit</strong> due on registration. <u>Deadline: August 31, 2025.</u></p>
        <ul class="list-unstyled mb-0">
          <li><strong>Destinations:</strong> Shrines & Harams across Iraq & Iran</li>
          <li><strong>Scholars:</strong> Under guidance of experienced scholars</li>
          <li><strong>Transport:</strong> Ground & air travel from SFO</li>
          <li><strong>Meals:</strong> Breakfast, lunch & dinner daily</li>
        </ul>
      </div>
    </div>

    <!-- Registration Form -->
    <form id="ziyarahForm" class="needs-validation" novalidate
          action="https://script.google.com/macros/s/AKfycbx…XYZ/exec"
          method="POST"
          enctype="multipart/form-data">

      <!-- 1. Personal Information -->
      <h2 class="h5 mb-3">1. Personal Information</h2>
      <div class="row g-3">
        <div class="col-md-6">
          <label for="fullName" class="form-label">Full Name</label>
          <input type="text" class="form-control" id="fullName" name="fullName" required>
          <div class="invalid-feedback">Full name is required.</div>
        </div>
        <div class="col-md-3">
          <label for="dateOfBirth" class="form-label">Date of Birth</label>
          <input type="text" class="form-control flatpickr" id="dateOfBirth" name="dateOfBirth" required placeholder="YYYY-MM-DD">
          <div class="invalid-feedback">Please choose your date of birth.</div>
        </div>
        <div class="col-md-3">
          <label for="gender" class="form-label">Gender</label>
          <select class="form-select" id="gender" name="gender" required>
            <option value="" disabled selected>Choose…</option>
            <option>Male</option>
            <option>Female</option>
            <option>Other / Prefer not to say</option>
          </select>
          <div class="invalid-feedback">Please select a gender.</div>
        </div>

        <div class="col-md-9">
          <label for="address" class="form-label">Street Address</label>
          <input type="text" class="form-control" id="address" name="address" required>
          <div class="invalid-feedback">Street address is required.</div>
        </div>
        <div class="col-md-3">
          <label for="zip" class="form-label">Zip / Postal Code</label>
          <input type="text" class="form-control" id="zip" name="zip" required>
          <div class="invalid-feedback">ZIP code is required.</div>
        </div>

        <div class="col-md-6">
          <label for="city" class="form-label">City</label>
          <input type="text" class="form-control" id="city" name="city" required>
          <div class="invalid-feedback">City is required.</div>
        </div>
        <div class="col-md-6">
          <label for="state" class="form-label">State</label>
          <input type="text" class="form-control" id="state" name="state" required>
          <div class="invalid-feedback">State is required.</div>
        </div>

        <div class="col-md-6">
          <label for="phone" class="form-label">Phone Number</label>
          <input type="tel" class="form-control" id="phone" name="phone" placeholder="(123) 456-7890" required>
          <div class="invalid-feedback">Phone number is required.</div>
        </div>
        <div class="col-md-6">
          <label for="email" class="form-label">Email Address</label>
          <input type="email" class="form-control" id="email" name="email" placeholder="you@example.com" required>
          <div class="invalid-feedback">Valid email is required.</div>
        </div>
      </div>

      <!-- 2. Passport & Photo Upload -->
      <h2 class="h5 mt-5 mb-3">2. Passport & Photo</h2>
      <div class="row g-3">
        <div class="col-md-6">
          <label for="passportNumber" class="form-label">Passport Number</label>
          <input type="text" class="form-control" id="passportNumber" name="passportNumber" required>
          <div class="invalid-feedback">Passport number is required.</div>
        </div>
        <div class="col-md-6">
          <label for="passportExpiry" class="form-label">Passport Expiry</label>
          <input type="text" class="form-control flatpickr" id="passportExpiry" name="passportExpiry" required placeholder="YYYY-MM-DD">
          <div class="invalid-feedback">Expiry date is required.</div>
        </div>

        <div class="col-12">
          <label for="passportPhoto" class="form-label">Passport Photo (JPEG/PNG, ≤5 MB)</label>
          <input class="form-control" type="file" id="passportPhoto" name="passportPhoto"
                 accept="image/jpeg,image/png" required>
          <div class="invalid-feedback">Please upload your passport photo.</div>
          <img id="passportPreview" class="img-fluid mt-2 d-none" style="max-height:200px;" alt="Preview">
        </div>
      </div>

      <!-- 3. Emergency Contact -->
      <h2 class="h5 mt-5 mb-3">3. Emergency Contact</h2>
      <div class="row g-3">
        <div class="col-md-4">
          <label for="emergencyName" class="form-label">Name</label>
          <input type="text" class="form-control" id="emergencyName" name="emergencyName" required>
          <div class="invalid-feedback">Name is required.</div>
        </div>
        <div class="col-md-4">
          <label for="emergencyRelationship" class="form-label">Relationship</label>
          <input type="text" class="form-control" id="emergencyRelationship" name="emergencyRelationship" required>
          <div class="invalid-feedback">Relationship is required.</div>
        </div>
        <div class="col-md-4">
          <label for="emergencyPhone" class="form-label">Phone</label>
          <input type="tel" class="form-control" id="emergencyPhone" name="emergencyPhone" required>
          <div class="invalid-feedback">Phone is required.</div>
        </div>
      </div>
      <div class="row g-3 mt-1">
        <div class="col-12">
          <label for="emergencyAddress" class="form-label">Address</label>
          <input type="text" class="form-control" id="emergencyAddress" name="emergencyAddress" required>
          <div class="invalid-feedback">Address is required.</div>
        </div>
      </div>

      <!-- 4. Health & Needs -->
      <h2 class="h5 mt-5 mb-3">4. Health & Needs</h2>
      <div class="mb-3">
        <label for="medicalConditions" class="form-label">Medical Conditions / Allergies</label>
        <textarea class="form-control" id="medicalConditions" name="medicalConditions"
                  placeholder="If none, write ‘N/A’"></textarea>
      </div>
      <div class="row g-3">
        <div class="col-md-6">
          <label for="dietaryRestrictions" class="form-label">Dietary Restrictions</label>
          <input type="text" class="form-control" id="dietaryRestrictions" name="dietaryRestrictions">
        </div>
        <div class="col-md-6">
          <label for="roommatePref" class="form-label">Roommate Preference</label>
          <input type="text" class="form-control" id="roommatePref" name="roommatePref">
        </div>
      </div>

      <!-- 5. Trip Options -->
      <h2 class="h5 mt-5 mb-3">5. Trip Details & Options</h2>
      <div class="row g-3">
        <div class="col-md-6">
          <label for="departureAirport" class="form-label">Departure Airport</label>
          <select class="form-select" id="departureAirport" name="departureAirport" required>
            <option value="" disabled selected>Choose…</option>
            <option>SFO</option>
            <option>OAK</option>
            <option>SJC</option>
            <option>Other</option>
          </select>
          <div class="invalid-feedback">Please pick an airport.</div>
        </div>
        <div class="col-md-6">
          <label for="otherAirport" class="form-label">If Other, specify</label>
          <input type="text" class="form-control" id="otherAirport" name="otherAirport" placeholder="e.g. LAX">
        </div>
        <div class="col-md-6">
          <label for="travelInsurance" class="form-label">Travel Insurance?</label>
          <select class="form-select" id="travelInsurance" name="travelInsurance" required>
            <option value="" disabled selected>Choose…</option>
            <option>Yes</option>
            <option>No</option>
          </select>
          <div class="invalid-feedback">Please select an option.</div>
        </div>
      </div>

      <!-- 6. Payment Details -->
      <h2 class="h5 mt-5 mb-3">6. Payment Details</h2>
      <p class="small text-muted">
        Deposit: <strong>$500</strong>. Balance: <del>$3,450</del> by October 15, 2025.
      </p>
      <div class="row g-3">
        <div class="col-md-6">
          <label for="paymentMethod" class="form-label">Payment Method</label>
          <select class="form-select" id="paymentMethod" name="paymentMethod" required>
            <option value="" disabled selected>Choose…</option>
            <option>Credit Card</option>
            <option>ACH / Bank Transfer</option>
            <option>Check</option>
            <option>Zelle</option>
            <option>Other</option>
          </select>
          <div class="invalid-feedback">Method required.</div>
        </div>
        <div class="col-md-6">
          <label for="depositAmount" class="form-label">Deposit Amount ($)</label>
          <input type="number" class="form-control" id="depositAmount" name="depositAmount"
                 min="500" max="3950" step="0.01" value="500" required>
          <div class="invalid-feedback">Deposit must be ≥ 500.</div>
        </div>
        <div class="col-12">
          <label for="paymentDetails" class="form-label">Additional Info</label>
          <input type="text" class="form-control" id="paymentDetails" name="paymentDetails"
                 placeholder="e.g. Zelle TXN #123456">
        </div>
      </div>

      <!-- 7. Terms & Signature -->
      <h2 class="h5 mt-5 mb-3">7. Terms & Signature</h2>
      <div class="mb-3 form-check">
        <input type="checkbox" class="form-check-input" id="agreeTerms" name="agreeTerms" required>
        <label class="form-check-label" for="agreeTerms">
          I agree to pay the remaining balance by October 15, 2025.
        </label>
        <div class="invalid-feedback">You must agree before submitting.</div>
      </div>
      <div class="mb-4">
        <label for="signature" class="form-label">e-Signature (Full Name)</label>
        <input type="text" class="form-control" id="signature" name="signature"
               placeholder="e.g. John Smith" required>
        <div class="invalid-feedback">Signature required.</div>
      </div>

      <!-- Submit -->
      <button type="submit" class="btn btn-primary w-100 mb-5">Submit Registration</button>
    </form>
  </div>

  <!-- Bootstrap Bundle (incl. Popper) -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
  ></script>
  <!-- Flatpickr JS -->
  <script
    src="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.js"
  ></script>

  <script>
    // Initialize Flatpickr on our date fields
    flatpickr(".flatpickr", {
      dateFormat: "Y-m-d",
      allowInput: true
    });

    // Bootstrap form validation
    (function() {
      "use strict";
      const form = document.getElementById("ziyarahForm");
      form.addEventListener("submit", function(event) {
        if (!form.checkValidity()) {
          event.preventDefault();
          event.stopPropagation();
        }
        form.classList.add("was-validated");
      }, false);
    })();

    // Passport-photo preview
    document.getElementById("passportPhoto")
      .addEventListener("change", function(evt) {
        const [file] = this.files;
        const preview = document.getElementById("passportPreview");
        if (file) {
          preview.src = URL.createObjectURL(file);
          preview.classList.remove("d-none");
        } else {
          preview.src = "";
          preview.classList.add("d-none");
        }
      });
  </script>
</body>
</html>
